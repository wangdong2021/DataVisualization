<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çƒå‘˜èŒä¸šç”Ÿæ¶¯è½¨è¿¹å¯¹æ¯”</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
     <script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-annotation/1.4.0/chartjs-plugin-annotation.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        #trajectoryChartContainer {
            width: 95%;
            max-width: 900px; /* å¢åŠ æœ€å¤§å®½åº¦ä»¥å®¹çº³æ›´å¤šæ•°æ®ç‚¹ */
            height: 550px; /* å¢åŠ é«˜åº¦ */
            margin: 1rem auto;
        }
    </style>
</head>
<body class="bg-gray-100 p-4 md:p-8 flex flex-col items-center min-h-screen">

    <div class="container mx-auto max-w-6xl bg-white p-6 rounded-lg shadow-md w-full">
        <h1 class="text-2xl md:text-3xl font-bold text-center mb-6 text-gray-800">ä¼ å¥‡çƒå‘˜èŒä¸šç”Ÿæ¶¯å¾—åˆ†è½¨è¿¹å¯¹æ¯” (æ¨¡æ‹Ÿæ•°æ®)</h1>

        <div id="trajectoryChartContainer">
            <canvas id="trajectoryChart"></canvas>
        </div>

        <div id="legendContainer" class="mt-4 text-center text-sm text-gray-600">
            å›¾ä¾‹è¯´æ˜ï¼š<br>
            <span class="inline-block w-3 h-3 bg-red-500 mr-1 rounded-full"></span> è¿ˆå…‹å°”Â·ä¹”ä¸¹
            <span class="inline-block w-3 h-3 bg-blue-500 mr-1 ml-3 rounded-full"></span> å‹’å¸ƒæœ—Â·è©¹å§†æ–¯
            <span class="inline-block w-3 h-3 bg-green-500 mr-1 ml-3 rounded-full"></span> å¡é‡Œå§†Â·é˜¿åœæœå°”-è´¾å·´å°” <br>
            <span class="font-bold text-yellow-500">*</span> å¯èƒ½ä»£è¡¨ MVP èµ›å­£ (æ¨¡æ‹Ÿ)
            <span class="font-bold text-purple-600 ml-2">ğŸ†</span> å¯èƒ½ä»£è¡¨æ€»å† å†›èµ›å­£ (æ¨¡æ‹Ÿ)
        </div>

        <div id="messageBox" class="mt-4 text-center text-gray-500 font-medium text-xs">
             æç¤ºï¼šæ•°æ®ä¸ºæ¨¡æ‹Ÿæˆ–ç®€åŒ–æ•°æ®ï¼Œä»…ç”¨äºå¯è§†åŒ–æ¼”ç¤ºã€‚Xè½´ä»£è¡¨èŒä¸šç”Ÿæ¶¯ç¬¬ N ä¸ªèµ›å­£ã€‚
         </div>
    </div>

    <script>
        // --- æ¨¡æ‹Ÿæ•°æ® ---
        // ç»“æ„: { name: string, color: string, ppg: number[], keySeasons: { yearIndex: number, type: 'MVP' | 'Champ' }[] }
        // ppg æ•°ç»„çš„ç´¢å¼•å¯¹åº”èŒä¸šç”Ÿæ¶¯èµ›å­£ (0 = ç¬¬1èµ›å­£, 1 = ç¬¬2èµ›å­£, ...)
        const playersData = [
            {
                name: 'è¿ˆå…‹å°”Â·ä¹”ä¸¹',
                color: 'rgb(239, 68, 68)', // red-500
                // ç®€åŒ– PPG æ•°æ® (ä»…å¸¸è§„èµ›, å¿½ç•¥ä¸­é—´é€€å½¹)
                ppg: [28.2, 22.7, 37.1, 35.0, 32.5, 33.6, 31.5, 30.1, 32.6, 26.9, 30.4, 29.6, 28.7, 22.9, 20.0],
                keySeasons: [
                    { yearIndex: 2, type: 'MVP' }, // 87-88 MVP
                    { yearIndex: 6, type: 'Champ' }, // 90-91 Champ & MVP
                    { yearIndex: 7, type: 'Champ' }, // 91-92 Champ & MVP
                    { yearIndex: 8, type: 'Champ' }, // 92-93 Champ
                    { yearIndex: 10, type: 'Champ' }, // 95-96 Champ & MVP
                    { yearIndex: 11, type: 'Champ' }, // 96-97 Champ
                    { yearIndex: 12, type: 'Champ' }, // 97-98 Champ & MVP
                ]
            },
            {
                name: 'å‹’å¸ƒæœ—Â·è©¹å§†æ–¯',
                color: 'rgb(59, 130, 246)', // blue-500
                // ç®€åŒ– PPG æ•°æ® (ä»…å¸¸è§„èµ›, æˆªè‡³æ¨¡æ‹Ÿæ•°æ®ç‚¹)
                ppg: [20.9, 27.2, 31.4, 27.3, 30.0, 28.4, 29.7, 26.7, 27.1, 26.8, 27.1, 25.3, 25.3, 26.4, 27.5, 27.4, 25.3, 25.0, 30.3, 28.9, 27.0], // æ¨¡æ‹Ÿåˆ°ç¬¬21èµ›å­£
                 keySeasons: [
                    { yearIndex: 5, type: 'MVP' },  // 08-09 MVP
                    { yearIndex: 6, type: 'MVP' },  // 09-10 MVP
                    { yearIndex: 8, type: 'Champ' }, // 11-12 Champ & MVP
                    { yearIndex: 9, type: 'Champ' }, // 12-13 Champ & MVP
                    { yearIndex: 12, type: 'Champ' },// 15-16 Champ
                    { yearIndex: 14, type: 'MVP' }, // 17-18 (æœªè·MVPä½†è¡¨ç°æä½³, æ¨¡æ‹Ÿæ ‡æ³¨)
                    { yearIndex: 16, type: 'Champ' },// 19-20 Champ
                ]
            },
            {
                name: 'å¡é‡Œå§†Â·é˜¿åœæœå°”-è´¾å·´å°”',
                color: 'rgb(34, 197, 94)', // green-500
                // ç®€åŒ– PPG æ•°æ® (ä»…å¸¸è§„èµ›)
                ppg: [28.8, 31.7, 34.8, 30.2, 27.0, 30.0, 27.7, 26.2, 25.8, 23.8, 24.8, 26.2, 23.9, 21.8, 21.5, 22.0, 23.4, 17.5, 14.6, 10.1],
                 keySeasons: [
                    { yearIndex: 1, type: 'MVP' },  // 70-71 Champ & MVP
                    { yearIndex: 2, type: 'MVP' },  // 71-72 MVP
                    { yearIndex: 4, type: 'MVP' },  // 73-74 MVP
                    { yearIndex: 6, type: 'MVP' },  // 75-76 MVP
                    { yearIndex: 7, type: 'MVP' },  // 76-77 MVP
                    { yearIndex: 10, type: 'Champ'}, // 79-80 Champ & MVP
                    { yearIndex: 12, type: 'Champ'}, // 81-82 Champ
                    { yearIndex: 15, type: 'Champ'}, // 84-85 Champ
                    { yearIndex: 17, type: 'Champ'}, // 86-87 Champ
                    { yearIndex: 18, type: 'Champ'}, // 87-88 Champ
                ]
            }
            // å¯ä»¥æ·»åŠ æ›´å¤šçƒå‘˜æ•°æ®...
        ];

        // --- Chart.js é…ç½® ---
        const trajectoryChartCtx = document.getElementById('trajectoryChart').getContext('2d');
        let trajectoryChart = null;

        // å‡†å¤‡ Chart.js æ•°æ®é›†
        const datasets = playersData.map(player => {
            return {
                label: player.name,
                data: player.ppg,
                borderColor: player.color,
                backgroundColor: player.color, // ç”¨äºç‚¹çš„èƒŒæ™¯è‰²
                fill: false,
                tension: 0.1, // è½»å¾®æ›²çº¿
                pointRadius: (context) => { // æ ¹æ®æ˜¯å¦æ˜¯å…³é”®èµ›å­£è°ƒæ•´ç‚¹çš„å¤§å°
                    const keySeasonInfo = player.keySeasons.find(ks => ks.yearIndex === context.dataIndex);
                    return keySeasonInfo ? 6 : 3; // å…³é”®èµ›å­£ç‚¹æ›´å¤§
                },
                pointHoverRadius: (context) => {
                     const keySeasonInfo = player.keySeasons.find(ks => ks.yearIndex === context.dataIndex);
                    return keySeasonInfo ? 8 : 5;
                },
                 pointStyle: (context) => { // æ ¹æ®å…³é”®èµ›å­£ç±»å‹è°ƒæ•´ç‚¹çš„æ ·å¼ (å¯é€‰)
                    const keySeasonInfo = player.keySeasons.find(ks => ks.yearIndex === context.dataIndex);
                     if (keySeasonInfo?.type === 'MVP') return 'star'; // MVP ç”¨æ˜Ÿå½¢
                     if (keySeasonInfo?.type === 'Champ') return 'triangle'; // å† å†›ç”¨ä¸‰è§’å½¢
                    return 'circle'; // é»˜è®¤åœ†å½¢
                 }
            };
        });

        // è®¡ç®—æœ€é•¿ç”Ÿæ¶¯çš„èµ›å­£æ•°ä½œä¸º X è½´æ ‡ç­¾
        const maxSeasons = Math.max(...playersData.map(p => p.ppg.length));
        const labels = Array.from({ length: maxSeasons }, (_, i) => `ç¬¬ ${i + 1} èµ›å­£`);

        // Chart.js é€‰é¡¹
        const chartOptions = {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                x: {
                    title: {
                        display: true,
                        text: 'èŒä¸šç”Ÿæ¶¯èµ›å­£'
                    }
                },
                y: {
                    beginAtZero: true,
                    title: {
                        display: true,
                        text: 'åœºå‡å¾—åˆ† (PPG)'
                    }
                }
            },
            plugins: {
                legend: {
                    display: false // ä½¿ç”¨è‡ªå®šä¹‰å›¾ä¾‹
                    // position: 'top',
                },
                tooltip: {
                    mode: 'index', // åœ¨åŒä¸€ç´¢å¼•å¤„æ˜¾ç¤ºæ‰€æœ‰æ•°æ®é›†çš„å·¥å…·æç¤º
                    intersect: false, // é¼ æ ‡æ‚¬åœåœ¨è½´ä¸Šæ—¶è§¦å‘
                    callbacks: {
                        title: function(tooltipItems) {
                            // æ˜¾ç¤ºèµ›å­£åºå·ä½œä¸ºæ ‡é¢˜
                            return labels[tooltipItems[0].dataIndex];
                        },
                        label: function(context) {
                            let label = context.dataset.label || '';
                            if (label) {
                                label += ': ';
                            }
                            if (context.parsed.y !== null) {
                                label += context.parsed.y.toFixed(1) + ' PPG'; // ä¿ç•™ä¸€ä½å°æ•°
                            }
                             // åœ¨å·¥å…·æç¤ºä¸­æ·»åŠ å…³é”®èµ›å­£ä¿¡æ¯
                            const player = playersData.find(p => p.name === context.dataset.label);
                            const keySeasonInfo = player?.keySeasons.find(ks => ks.yearIndex === context.dataIndex);
                            if (keySeasonInfo?.type === 'MVP') {
                                label += ' (MVP*)';
                            }
                             if (keySeasonInfo?.type === 'Champ') {
                                label += ' (ChampğŸ†)';
                            }
                            return label;
                        }
                    }
                },
                 // Annotation plugin configuration (optional, for drawing lines/boxes)
                // annotation: {
                //     annotations: {
                //         // Example: Add a vertical line for Jordan's first retirement (after 9th season, index 8)
                //         line1: {
                //             type: 'line',
                //             xMin: 8.5, // Position between season 9 and 10
                //             xMax: 8.5,
                //             borderColor: 'rgba(0, 0, 0, 0.5)',
                //             borderWidth: 1,
                //             borderDash: [6, 6],
                //             label: {
                //                 content: "Jordan 1st Retirement",
                //                 enabled: true,
                //                 position: "start"
                //             }
                //         }
                //     }
                // }
            },
            interaction: { // ä¼˜åŒ–äº¤äº’
                 mode: 'nearest',
                 axis: 'x',
                 intersect: false
             }
        };

        // åˆ›å»ºå›¾è¡¨
        trajectoryChart = new Chart(trajectoryChartCtx, {
            type: 'line',
            data: {
                labels: labels,
                datasets: datasets
            },
            options: chartOptions
            // plugins: [ChartAnnotation] // å¦‚æœä½¿ç”¨ annotation plugin éœ€è¦æ³¨å†Œ
        });

    </script>

</body>
</html>
